{% extends "base_dashboard.html" %}

{% block content %}
<div class="container-fluid px-4">
  <h1 class="mt-4">Survey</h1>
  <ol class="breadcrumb mb-4">
    <li class="breadcrumb-item"><a href="{{ url_for('dashboard') }}">Dashboard</a></li>
    <li class="breadcrumb-item active">Survey</li>
  </ol>
  <div class="card mb-4">
    <div class="card-header">
      <i class="fas fa-table me-1"></i>
      Your address
    </div>
    {{ wtf.quick_form(address_form) }}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/suggestions-jquery@21.12.0/dist/css/suggestions.min.css"
      rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/suggestions-jquery@21.12.0/dist/js/jquery.suggestions.min.js"></script>

    <script>
      $("#address").suggestions({
        token: "d61f4014a0ee44720df64e60a6294155e905116c",
        type: "ADDRESS",
        /* Вызывается, когда пользователь выбирает одну из подсказок */
        onSelect: function (suggestion) {
          console.log(suggestion);
        }
      });
    </script>

  </div>

  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-7">
        <div class="card shadow-sm border-0 rounded-lg mt-5">
          <div class="card-header">
            <h4 class="text-center font-weight-light my-4"> Заполните данные о квартире</h4>
          </div>
          <div class="card-body">
            <form>
              <div class="form-floating mb-3">
                {{ realty_form.city() }}
                <label for="inputCity">Город</label>
              </div>
              <div class="form-floating mb-3">
                {{ realty_form.city_district() }}
                <label for="inputPassword">Район</label>
              </div>
              <div class="form-floating mb-3">
                {{ realty_form.metro() }}
                <label for="inputPassword">Метро</label>
              </div>
              <div class="form-floating mb-3">
                {{ realty_form.street() }}
                <label for="inputPassword">Улица</label>
              </div>
              <div class="form-floating mb-3">
                {{ realty_form.year() }}
                <label for="inputPassword">Год постройки здания</label>
              </div>
              <div class="row mb-3">
                <div class="col-md-6">
                  <div class="form-floating mb-3 mb-md-0">
                    {{ realty_form.floor() }}
                    <label for="inputPassword">Этаж</label>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-floating">
                    {{ realty_form.floors_total() }}
                    <label for="inputPassword">Этажей в доме</label>
                  </div>
                </div>
              </div>
              <div class="mt-4 mb-0">
                <div class="d-grid"><a class="btn btn-primary btn-block" href="{{ url_for('survey') }}">Рассчитать!</a></div>
              </div>


            </form>
          </div>

        </div>
      </div>
    </div>
  </div>
  <div class="card mb-4">
    <div class="card-header">
      <i class="fas fa-table me-1"></i>
      Data by address
    </div>
    <div class="card-body">
      {% if address_data %}
      {{address_data | safe}}
      {% else %}
      Data is missing or invalid :(
      {% endif %}
    </div>
  </div>
</div>

{% endblock %}